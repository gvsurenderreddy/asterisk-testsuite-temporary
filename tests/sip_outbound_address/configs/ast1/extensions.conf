[test_context]
;Base line.
;Result: Use sip.conf info
exten => test1,1,Dial(SIP/peer,,M(readdtmf))
exten => test1,n,Hangup

;Basic change to outbound. Should dial to explicit host:port
;Result: Use host in dialstring
exten => test2,1,Dial(SIP/peer//127.0.0.1:5062,,M(readdtmf))
exten => test2,n,Hangup

;Adding user portion should not affect routing
;Result: Use host in dialstring
exten => test3,1,Dial(SIP/1000@peer//127.0.0.1:5062,,M(readdtmf))
exten => test3,n,Hangup

;Neither should adding extension between peer and host
;Result: Use host in dialstring
exten => test4,1,Dial(SIP/peer/1000/127.0.0.1:5062,,M(readdtmf))
exten => test4,n,Hangup

;Neither should a conflict in which extension to use
;Result: Use host in dialstring
exten => test5,1,Dial(SIP/1000@peer/1000/127.0.0.1:5062,,M(readdtmf))
exten => test5,n,Hangup

;This one has the wrong number of slashes before the host
;Result: Use sip.conf info
exten => test6,1,Dial(SIP/1000@peer/127.0.0.1:5062,,M(readdtmf))
exten => test6,n,Hangup

[macro-readdtmf]
exten => s,1,Read(READRESULT,,1,,1,5)
exten => s,n,MacroExit
