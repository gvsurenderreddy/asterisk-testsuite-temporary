[general]

[globals]
DEBUG=FAIL - nothing done

[agitest]
exten => echo,1,Answer()
exten => echo,n,Echo()

; Used in connect, hangup, control-stream-file, stream-file, database, execute, get-data, record-file
exten => b_exten,1,Answer()
exten => b_exten,n,Set(GLOBAL(DEBUG)=FAIL - before agi)
exten => b_exten,n,AGI(agi://127.0.0.1:4573)
exten => b_exten,n,Set(GLOBAL(DEBUG)=${AGISTATUS})
exten => b_exten,n,HangUp()

; Used in channel-status
exten => c_exten,1,Set(GLOBAL(DEBUG)=FAIL - before agi)
exten => c_exten,n,AGI(agi://127.0.0.1:4573)
exten => c_exten,n,Set(GLOBAL(DEBUG)=${AGISTATUS})
exten => c_exten,n,HangUp()

; Used in get-data
exten => d_exten,1,Answer()
exten => d_exten,n,Set(GLOBAL(DEBUG)=FAIL - d_exten answered)
exten => d_exten,n,SendDTMF(w3w2w1w2w3w3w3w#)
exten => d_exten,n,Set(GLOBAL(DEBUG)=FAIL - d_exten sent DTMF)
exten => d_exten,n,HangUp()

; Used in record-file
exten => e_exten,1,Answer()
exten => e_exten,n,Set(GLOBAL(DEBUG)=FAIL - e_exten answered)
exten => e_exten,n,Wait(1)
exten => e_exten,n,Playback(beep)
exten => e_exten,n,SendDTMF(#)
exten => e_exten,n,Set(GLOBAL(DEBUG)=FAIL - e_exten sent sounds and exit digit)
exten => e_exten,n,HangUp()

; Used in record-file
exten => f_exten,1,Answer()
exten => f_exten,n,Set(GLOBAL(DEBUG)=FAIL - f_exten answered)
exten => f_exten,n,Wait(1)
exten => f_exten,n,Playback(beep)
exten => f_exten,n,Set(GLOBAL(DEBUG)=FAIL - f_exten sent sounds)
exten => f_exten,n,HangUp()
