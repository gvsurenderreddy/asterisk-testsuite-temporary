testinfo:
    summary: 'Test nominal prepend of message while forwarding messages from app_voicemails VoiceMailMain'
    description: |
        This test verifies that a user can prepend a message to a message
        being forwarded from VoiceMailMain

properties:
    minversion: '1.8'
    buildoption: 'TEST_FRAMEWORK'
    testconditions:
        - name: 'threads'
          ignoredThreads:
            - 'netconsole'
            - 'pbx_thread'
        - name: 'sip-dialogs'
          # Note: the abrupt hangup will leave the SIP dialog in flight
          expectedResult: 'FAIL'
          sipHistoryRequirements:
            - 'NewChan'
            - 'Hangup'
        - name: 'file-descriptors'
          # This test will fail the FD check - for an unknown reason, some files are left
          # open at the end of the run, probably due to the hangup in the middle of recording
          # the prepend file.  This very well may be a bug in Asterisk, but requires more
          # analysis at this time.
          expectedResult: 'FAIL'
    dependencies:
        - python : 'twisted'
        - python : 'starpy'
        - asterisk : 'app_voicemail'
        - asterisk : 'app_senddtmf'
        - asterisk : 'app_playback'
