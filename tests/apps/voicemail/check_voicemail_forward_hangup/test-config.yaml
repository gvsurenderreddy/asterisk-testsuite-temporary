testinfo:
    summary: 'Test off-nominal hangup while forwarding messages from app_voicemails VoiceMailMain'
    description: |
        This test verifies that if a user hangs up while forwarding voicemails, the
        voicemails are not forwarded.  This occurs typically when choosing the prepend
        option, and the user fails to leave a full message while prepending.

properties:
    minversion: '1.8'
    buildoption: 'TEST_FRAMEWORK'
    testconditions:
        - name: 'threads'
          ignoredThreads:
            - 'netconsole'
            - 'pbx_thread'
        - name: 'sip-dialogs'
          # Note: the abrupt hangup will leave the SIP dialog in flight
          expectedResult: 'FAIL'
          sipHistoryRequirements:
            - 'NewChan'
            - 'Hangup'
    dependencies:
        - python : 'twisted'
        - python : 'starpy'
        - asterisk : 'app_voicemail'
        - asterisk : 'app_senddtmf'
        - asterisk : 'app_playback'
