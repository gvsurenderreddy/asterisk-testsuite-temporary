[default]

exten => s,1,Answer()
   same => n,Set(__TESTVAR=poop)
   same => n,Set(PUSH(REGULAR_PUSH)=yes)
   same => n,Set(PUSH(REGULAR_PUSH)=please)
   same => n,Set(PUSH(__INHERIT_PUSH)=yes)
   same => n,Set(PUSH(__INHERIT_PUSH)=please)
   same => n,Set(UNSHIFT(REGULAR_UNSHIFT)=please)
   same => n,Set(UNSHIFT(REGULAR_UNSHIFT)=yes)
   same => n,Set(UNSHIFT(__INHERIT_UNSHIFT)=please)
   same => n,Set(UNSHIFT(__INHERIT_UNSHIFT)=yes)
   same => n,Dial(Local/dest@default)

exten => dest,1,Answer()
      same => n,UserEvent(PushInheritance,result: ${IF($[${INHERIT_PUSH} = yes,please]?pass:fail)})
      same => n,UserEvent(UnshiftInheritance,result: ${IF($[${INHERIT_UNSHIFT} = yes,please]?pass:fail)})
      same => n,Wait(1)
	  same => n,Hangup()
[default]

exten => s,1,Answer()
   same => n,Set(__TESTVAR=poop)
   same => n,Set(PUSH(REGULAR_PUSH)=yes)
   same => n,Set(PUSH(REGULAR_PUSH)=please)
   same => n,Set(PUSH(__INHERIT_PUSH)=yes)
   same => n,Set(PUSH(__INHERIT_PUSH)=please)
   same => n,Set(UNSHIFT(REGULAR_UNSHIFT)=please)
   same => n,Set(UNSHIFT(REGULAR_UNSHIFT)=yes)
   same => n,Set(UNSHIFT(__INHERIT_UNSHIFT)=please)
   same => n,Set(UNSHIFT(__INHERIT_UNSHIFT)=yes)
   same => n,Dial(Local/dest@default)

exten => dest,1,Answer()
      same => n,UserEvent(PushInheritance,result: ${IF($[${INHERIT_PUSH} = yes,please]?pass:fail)})
      same => n,UserEvent(UnshiftInheritance,result: ${IF($[${INHERIT_UNSHIFT} = yes,please]?pass:fail)})
      same => n,Wait(1)
	  same => n,Hangup()
